<div class="fixed inset-0 bg-white/40 backdrop-blur-sm flex items-center justify-center z-[9999]">

  <div class="bg-white rounded-xl shadow-xl w-[380px] max-h-[80vh] flex flex-col p-5">

    <div class="flex items-center justify-between mb-4">
      <h2 class="text-lg font-semibold">Neuer Arztchat</h2>

      <button
        class="text-gray-500 hover:text-gray-700"
        (click)="close.emit()">
        ✕
      </button>
    </div>

    <input
      [(ngModel)]="searchTerm"
      (input)="onSearch()"
      type="text"
      class="w-full border px-3 py-2 rounded-lg text-sm mb-3"
      placeholder="Arzt suchen..."
    />

    <div *ngIf="loading" class="text-gray-400 text-sm py-6 text-center">
      Lade verfügbare Ärzte...
    </div>

    <div *ngIf="!loading && filteredUsers.length === 0"
         class="text-gray-400 text-sm py-6 text-center">
      Keine verfügbaren Ärzte gefunden.
    </div>

    <div class="flex-1 overflow-y-auto space-y-2 pr-1"
         *ngIf="!loading && filteredUsers.length > 0">

      <div
        *ngFor="let user of filteredUsers"
        (click)="selectUser(user)"
        class="flex items-center gap-3 p-2 rounded-lg cursor-pointer
               hover:bg-gray-100 transition">

        <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center
                    text-gray-700 font-semibold">
          {{ user.firstName.charAt(0) }}
        </div>

        <div class="flex flex-col">
          <span class="text-sm font-medium">
            {{ user.firstName }} {{ user.lastName }}
          </span>

          <span class="text-xs text-gray-500">
            {{ user.professionalRoleUser }}
          </span>
        </div>

      </div>
    </div>

  </div>
</div>
