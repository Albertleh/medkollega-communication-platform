<div class="bg-white p-4 rounded-2xl shadow-md  h-full flex flex-col">

  <!-- HEADER -->
  <div class="flex items-center justify-between mb-3 flex-shrink-0">
    <h2 class="text-xl font-semibold">Textdokumentation</h2>
    <span class="text-xs text-gray-400">{{ entries.length }} Einträge</span>
  </div>

  <!-- SCROLLBEREICH -->
  <div class="flex-1 overflow-y-auto pr-1 [box-shadow:inset_0_-6px_6px_-6px_rgba(0,0,0,0.12)]">

    <!-- LOADING -->
    <div *ngIf="loading" class="text-sm text-gray-500">Lädt…</div>

    <!-- EMPTY -->
    <div *ngIf="!loading && entries.length === 0" class="text-sm text-gray-500">
      Keine Dokumentationseinträge vorhanden.
    </div>

    <!-- EINTRÄGE -->
    <div *ngFor="let e of filteredEntries" class="p-4 border rounded-xl mb-3 bg-white shadow-sm">


      <!-- NORMAL VIEW -->
      <div *ngIf="editId !== e.id">

        <p class="text-sm text-gray-900 leading-relaxed whitespace-pre-line mb-3">
          {{ e.text }}
        </p>

        <div class="flex justify-between items-center text-xs text-gray-400">
          <span>
            Erstellt: {{ e.createdAt | date:'dd.MM.yyyy HH:mm' }}
          </span>

          <div class="flex items-center gap-4">
            <button
              class="text-blue-600 hover:text-blue-800 transition"
              (click)="startEdit(e)"
            >
              Bearbeiten
            </button>

            <button
              class="text-red-600 hover:text-red-800 transition"
              (click)="deleteEntry(e.id)"
            >
              Löschen
            </button>
          </div>
        </div>
      </div>

      <!-- EDIT MODE -->
      <div *ngIf="editId === e.id" class="space-y-3">

        <textarea
          [(ngModel)]="editText"
          rows="4"
          class="w-full border rounded-lg p-3 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500"
        ></textarea>

        <div class="flex justify-end gap-4 text-sm">
          <button
            class="text-gray-500 hover:text-gray-800 transition"
            (click)="cancelEdit()"
          >
            Abbrechen
          </button>

          <button
            class="text-teal-700 font-medium hover:text-teal-900 transition"
            (click)="saveEdit(e.id)"
          >
            Speichern
          </button>
        </div>
      </div>

    </div>
  </div>

  <!-- FIXES EINGABEFELD WIE CHAT -->
<div class="pt-3 border-t mt-auto flex-shrink-0 bg-white">


    <!-- INPUT + SENDEN NEBENEINANDER -->
    <div class="flex items-end gap-3">

      <textarea
        [(ngModel)]="newEntryText"
        rows="2"
        placeholder="Neue Dokumentation eingeben..."
        class="flex-1 border rounded-lg p-3 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 resize-none"
      ></textarea>

      <button
        (click)="createNewEntry()"
        class="h-[42px] px-4 rounded-lg text-sm font-medium text-white
              bg-[#2D6A6A] hover:bg-[#245757] transition shrink-0"
      >
        Erstellen
      </button>

    </div>

  </div>

</div>
